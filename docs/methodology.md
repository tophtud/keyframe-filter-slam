# 키프레임 필터링 방법론

## 1. 위치 평가 (Position Score)

### 수식
```
S_pos = exp(-d² / (2σ²))
```

- `d`: 마지막 선택된 키프레임과의 유클리드 거리 (m)
- `σ`: 표준편차 (기본값: 2.0m)

### 특징
- 가우시안 함수로 자연스러운 거리 가중치 부여
- 출력 범위: 0~1 (정규화 불필요)

---

## 2. 방향 평가 (Direction Score)

### 수식
```
cos_sim = (v1 · v2) / (||v1|| × ||v2||)
S_dir = (cos_sim + 1) / 2
```

- `v1`, `v2`: 연속된 키프레임의 진행 방향 벡터
- 카메라 자세(Orientation)로부터 전방 벡터 계산

### 특징
- 코사인 유사도 (-1~1)를 0~1로 정규화
- 방향 변화가 큰 지점(코너) 감지

---

## 3. 품질 평가 (Quality Score)

### 수식
```
L_var = Var(Laplacian(image))
S_quality = (L_var - L_min) / (L_max - L_min)
```

- `L_var`: 라플라시안 분산 (이미지 선명도)
- Min-Max 정규화로 0~1 범위 변환

### 특징
- 모션 블러 및 초점 불량 이미지 필터링
- 특징점 추출에 유리한 선명한 이미지 선별

---

## 4. 최종 점수 계산

### 수식
```
S_total = α × S_pos + β × S_dir + γ × S_quality
```

- `α`, `β`, `γ`: 가중치 (α + β + γ = 1)
- 기본값: α=0.4, β=0.4, γ=0.2

### 특징
- 세 지표 모두 0~1로 정규화되어 공정한 가중 합산
- 가중치는 실험적으로 조정 가능

---

## 5. 세미-오토매틱 웨이포인트 생성

### 절차
1. 사용자가 초기 2-3개 키프레임 선택
2. 선택된 키프레임의 랜드마크 분포 분석
3. 평균 커버리지 기준 계산
4. 기준을 유지하면서 최고 점수 키프레임 순차 선택

### 특징
- 수동 작업 최소화
- 사용자 의도 반영
- 실험 재현성 확보

- 
복도 (위에서 본 모습):
┌─────────────────────────────────────────────────┐
│  벽                                              │
│                                                  │
│    ○ ○ ○ ○ ○ ○ ○ ○ ○ ○  ← 키프레임들 (무작위 이동)
│  ○     ○   ○     ○   ○                          │
│    ○ ○   ○   ○ ○   ○                            │
│  ★       ★       ★       ★       ★  ← 원하는 웨이포인트 (중앙)
│    ○   ○   ○ ○     ○   ○                        │
│  ○   ○       ○   ○   ○                          │
│                                                  │
│  벽                                              │
└─────────────────────────────────────────────────┘
     10m      20m      30m      40m      50m
